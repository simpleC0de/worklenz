# Worklenz Backend Environment Variables Template
# Copy this file to .env and fill in the values for your environment
# For development, most values can stay as-is with the defaults provided

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# Node environment
NODE_ENV=development

# Server port
PORT=3000

# Session configuration
SESSION_NAME=worklenz.sid

# Secret keys for session and cookies (Generate random strings in production)
# You can use: openssl rand -hex 32
SESSION_SECRET=your-random-session-secret-here
COOKIE_SECRET=your-random-cookie-secret-here
JWT_SECRET=your-random-jwt-secret-here

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL Connection
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=worklenz_db

# Connection pool settings
DB_MAX_CLIENTS=50
USE_PG_NATIVE=true

# ============================================================================
# FRONTEND & CORS CONFIGURATION
# ============================================================================

# Frontend URL for CORS and redirects
FRONTEND_URL=http://localhost:5173

# CORS allowed origins (comma-separated if multiple)
SERVER_CORS=http://localhost:5173

# Socket.IO CORS configuration
SOCKET_IO_CORS=http://localhost:5173

# ============================================================================
# STORAGE CONFIGURATION (S3/MinIO)
# ============================================================================

# Storage provider: 's3' for S3/MinIO, 'azure' for Azure Blob Storage
STORAGE_PROVIDER=s3

# S3/MinIO Configuration
S3_REGION=us-east-1
S3_BUCKET=worklenz-bucket
S3_ACCESS_KEY_ID=minioadmin
S3_SECRET_ACCESS_KEY=minioadmin
S3_URL=http://localhost:9000

# Azure Blob Storage Configuration (if STORAGE_PROVIDER=azure)
# AZURE_STORAGE_ACCOUNT_NAME=your-account-name
# AZURE_STORAGE_CONTAINER=your-container-name
# AZURE_STORAGE_ACCOUNT_KEY=your-account-key
# AZURE_STORAGE_URL=https://youraccountname.blob.core.windows.net

# ============================================================================
# EMAIL CONFIGURATION
# ============================================================================

# Email source address for notifications
SOURCE_EMAIL=dev@localhost

# Enable email cron jobs (disable for local development)
ENABLE_EMAIL_CRONJOBS=false

# SMTP Configuration (Optional - if email is needed)
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=your-email@example.com
# SMTP_PASSWORD=your-password
# SMTP_FROM=noreply@example.com
# SMTP_SECURE=true
# SMTP_REQUIRE_TLS=true
# SMTP_IGNORE_TLS=false

# ============================================================================
# OAUTH INTEGRATIONS
# ============================================================================

# OAuth Redirect URLs (Required for Discord/Google OAuth)
# These URLs are where users will be redirected after OAuth success/failure
LOGIN_SUCCESS_REDIRECT=http://localhost:5000
LOGIN_FAILURE_REDIRECT=http://localhost:5000/login

# Google OAuth Configuration (Optional)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_CALLBACK_URL=http://localhost:3000/auth/google/callback

# Discord Integration (Optional - New Feature)
DISCORD_BOT_TOKEN=
DISCORD_GUILD_ID=
DISCORD_CLIENT_ID=
DISCORD_CLIENT_SECRET=
DISCORD_CALLBACK_URL=http://localhost:3000/secure/discord/verify
DISCORD_WEBHOOK_URL=
ENABLE_DISCORD_EMAIL_MIRROR=false

# ============================================================================
# FILE PATHS
# ============================================================================

BACKEND_PUBLIC_DIR=./public
BACKEND_VIEWS_DIR=./views

# ============================================================================
# OPTIONAL: LICENSING SERVER URLS
# ============================================================================

# These are used for license verification and billing
# For local development, you can leave these empty or use local URLs
UAT_SERVER_URL=https://your-uat-server-url
DEV_SERVER_URL=https://your-dev-server-url
PRODUCTION_SERVER_URL=https://your-production-server-url

# ============================================================================
# OPTIONAL: EXTERNAL SERVICES
# ============================================================================

# Slack integration (if needed)
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/...

# Paddle (payment processor) - Production only
# PADDLE_VENDOR_ID=your-vendor-id
# PADDLE_API_KEY=your-api-key
# PADDLE_ENVIRONMENT=sandbox

# ============================================================================
# DEVELOPMENT NOTES
# ============================================================================

# For local development:
# 1. Copy this file to .env
# 2. Use the provided defaults
# 3. Only change values if you have specific requirements
# 4. Never commit .env file to git (add to .gitignore)
# 5. For production, use strong random secrets
#
# To generate random secrets:
#   Linux/Mac: openssl rand -hex 32
#   Windows: [System.Convert]::ToBase64String([System.Security.Cryptography.RNGCryptoServiceProvider]::new().GenerateRandomBytes(32))
